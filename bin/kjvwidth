#!/usr/bin/perl

# tell mythbuntu lyrics how wide a given chapter verse is

# See also my /usr/share/mythtv/metadata/Music/lyrics/filetweak.py
# which uses this to align tabs on mythbuntu.  DATA below END was
# generated by bin/kjvpixwidth, must match your lyric font -twitham

use strict;
use warnings;

my $cv = shift @ARGV or die "usage: $0 'chap N:V:'\n";

$cv =~ s/\./:/g;		# 2025/08 dot sync points
$cv =~ s/\b\d\d\d:/333:/g;
$cv =~ s/\b\d\d:/22:/g;
$cv =~ s/\b\d\:/1:/g;

my $width = 999;
while (<DATA>) {
    s/.*\]//;
    s/:\s+.*width=/: /;
    /(.*:)\s+(\d+)/ or next;
    $cv eq $1 and $width = $2 and last;
}
print "$width";
exit;

__END__
[00:01.00]		| lyric display test file for Ubuntu:size=41
[00:02.00]		| by bin/kjvpixwidth Ubuntu:size=41 kjv.txt
[00:03.00]		|
[00:04.00]		|<-- text starts at column 16 after 2 tabs
[00:05.00]ilililil	| vertical line in column 16 should align
[00:06.00]WMWMWMWM	| after any characters, narrow or wide
[00:07.00]		|
[00:08.00]		| verse prefix text is 7 to 12 bytes:
[00:09.00]		|
[00:10.00]1234567 	|  7 + SPACE + tab = 9 bytes
[00:11.00]12345678	|  8 + tab =  9 bytes
[00:12.00]123456789	|  9 + tab = 10 bytes
[00:13.00]1234567890	| 10 + tab = 11 bytes
[00:14.00]12345678901	| 11 + tab = 12 bytes
[00:15.00]123456789012	| 12 + tab = 13 bytes
[00:16.00]		|
[00:17.00]		| all possible prefixes are:
[00:18.00]		|
[00:19.00]Isa 1:1:	|  9 bytes | width=195
[00:20.00]Tit 1:1:	|  9 bytes | width=195
[00:21.00]Lk 1:1: 	|  9 bytes | width=197 (space-tab)
[00:22.00]Jn 1:1: 	|  9 bytes | width=199 (space-tab)
[00:23.00]Ex 1:1: 	|  9 bytes | width=200 (space-tab)
[00:24.00]Jer 1:1:	|  9 bytes | width=206
[00:25.00]Gal 1:1:	|  9 bytes | width=207
[00:26.00]Jas 1:1:	|  9 bytes | width=207
[00:27.00]Col 1:1:	|  9 bytes | width=209
[00:28.00]Pss 1:1:	|  9 bytes | width=209
[00:29.00]Mt 1:1: 	|  9 bytes | width=210 (space-tab)
[00:30.00]Lev 1:1:	|  9 bytes | width=213
[00:31.00]Eze 1:1:	|  9 bytes | width=214
[00:32.00]Mic 1:1:	|  9 bytes | width=214
[00:33.00]Lk 1:22:	|  9 bytes | width=215
[00:34.00]Lk 22:1:	|  9 bytes | width=215
[00:35.00]Ob 1:1: 	|  9 bytes | width=215 (space-tab)
[00:36.00]Mk 1:1: 	|  9 bytes | width=216 (space-tab)
[00:37.00]1Jn 1:1:	|  9 bytes | width=217
[00:38.00]2Jn 1:1:	|  9 bytes | width=217
[00:39.00]3Jn 1:1:	|  9 bytes | width=217
[00:40.00]Jn 1:22:	|  9 bytes | width=217
[00:41.00]Jn 22:1:	|  9 bytes | width=217
[00:42.00]Ex 1:22:	|  9 bytes | width=218
[00:43.00]Ex 22:1:	|  9 bytes | width=218
[00:44.00]Mal 1:1:	|  9 bytes | width=218
[00:45.00]Job 1:1:	|  9 bytes | width=219
[00:46.00]Rev 1:1:	|  9 bytes | width=219
[00:47.00]Eph 1:1:	|  9 bytes | width=222
[00:48.00]Hos 1:1:	|  9 bytes | width=222
[00:49.00]Eccl 1:1:	| 10 bytes | width=224
[00:50.00]Php 1:1:	|  9 bytes | width=224
[00:51.00]Gen 1:1:	|  9 bytes | width=225
[00:52.00]Hag 1:1:	|  9 bytes | width=225
[00:53.00]Dan 1:1:	|  9 bytes | width=226
[00:54.00]Hab 1:1:	|  9 bytes | width=226
[00:55.00]Isa 1:22:	| 10 bytes | width=226
[00:56.00]Isa 22:1:	| 10 bytes | width=226
[00:57.00]Nah 1:1:	|  9 bytes | width=226
[00:58.00]Tit 1:22:	| 10 bytes | width=226
[00:59.00]Heb 1:1:	|  9 bytes | width=228
[01:00.00]Mt 1:22:	|  9 bytes | width=228
[01:01.00]Mt 22:1:	|  9 bytes | width=228
[01:02.00]Neh 1:1:	|  9 bytes | width=228
[01:03.00]Lam 1:1:	|  9 bytes | width=231
[01:04.00]Joel 1:1:	| 10 bytes | width=232
[01:05.00]Ezra 1:1:	| 10 bytes | width=233
[01:06.00]Ob 1:22:	|  9 bytes | width=233
[01:07.00]Mk 1:22:	|  9 bytes | width=234
[01:08.00]Mk 22:1:	|  9 bytes | width=234
[01:09.00]Acts 1:1:	| 10 bytes | width=235
[01:10.00]Esth 1:1:	| 10 bytes | width=236
[01:11.00]Jer 1:22:	| 10 bytes | width=237
[01:12.00]Jer 22:1:	| 10 bytes | width=237
[01:13.00]Gal 1:22:	| 10 bytes | width=238
[01:14.00]Jas 1:22:	| 10 bytes | width=238
[01:15.00]Col 1:22:	| 10 bytes | width=238
[01:16.00]Phm 1:1:	|  9 bytes | width=239
[01:17.00]Pss 1:22:	| 10 bytes | width=240
[01:18.00]Pss 22:1:	| 10 bytes | width=240
[01:19.00]Prov 1:1:	| 10 bytes | width=241
[01:20.00]Rom 1:1:	|  9 bytes | width=241
[01:21.00]Josh 1:1:	| 10 bytes | width=242
[01:22.00]1Pet 1:1:	| 10 bytes | width=244
[01:23.00]2Pet 1:1:	| 10 bytes | width=244
[01:24.00]Lev 1:22:	| 10 bytes | width=244
[01:25.00]Lev 22:1:	| 10 bytes | width=244
[01:26.00]1Chr 1:1:	| 10 bytes | width=245
[01:27.00]2Chr 1:1:	| 10 bytes | width=245
[01:28.00]Eze 1:22:	| 10 bytes | width=245
[01:29.00]Eze 22:1:	| 10 bytes | width=245
[01:30.00]Mic 1:22:	| 10 bytes | width=245
[01:31.00]Num 1:1:	|  9 bytes | width=245
[01:32.00]Zech 1:1:	| 10 bytes | width=245
[01:33.00]1Cor 1:1:	| 10 bytes | width=246
[01:34.00]2Cor 1:1:	| 10 bytes | width=246
[01:35.00]Lk 22:22:	| 10 bytes | width=246
[01:36.00]Ruth 1:1:	| 10 bytes | width=246
[01:37.00]1Jn 1:22:	| 10 bytes | width=248
[01:38.00]1Kgs 1:1:	| 10 bytes | width=248
[01:39.00]2Jn 1:22:	| 10 bytes | width=248
[01:40.00]2Kgs 1:1:	| 10 bytes | width=248
[01:41.00]3Jn 1:22:	| 10 bytes | width=248
[01:42.00]Jn 22:22:	| 10 bytes | width=248
[01:43.00]Jude 1:1:	| 10 bytes | width=248
[01:44.00]Ex 22:22:	| 10 bytes | width=249
[01:45.00]Judg 1:1:	| 10 bytes | width=249
[01:46.00]Mal 1:22:	| 10 bytes | width=249
[01:47.00]Deut 1:1:	| 10 bytes | width=250
[01:48.00]Job 1:22:	| 10 bytes | width=250
[01:49.00]Job 22:1:	| 10 bytes | width=250
[01:50.00]Rev 1:22:	| 10 bytes | width=250
[01:51.00]Rev 22:1:	| 10 bytes | width=250
[01:52.00]1Tim 1:1:	| 10 bytes | width=251
[01:53.00]2Tim 1:1:	| 10 bytes | width=251
[01:54.00]Song 1:1:	| 10 bytes | width=251
[01:55.00]Zeph 1:1:	| 10 bytes | width=252
[01:56.00]Eph 1:22:	| 10 bytes | width=253
[01:57.00]Hos 1:22:	| 10 bytes | width=253
[01:58.00]Hos 22:1:	| 10 bytes | width=253
[01:59.00]Eccl 1:22:	| 11 bytes | width=255
[02:00.00]Eccl 22:1:	| 11 bytes | width=255
[02:01.00]Php 1:22:	| 10 bytes | width=255
[02:02.00]Gen 1:22:	| 10 bytes | width=256
[02:03.00]Gen 22:1:	| 10 bytes | width=256
[02:04.00]Hag 1:22:	| 10 bytes | width=256
[02:05.00]Dan 1:22:	| 10 bytes | width=257
[02:06.00]Dan 22:1:	| 10 bytes | width=257
[02:07.00]Hab 1:22:	| 10 bytes | width=257
[02:08.00]Isa 22:22:	| 11 bytes | width=257
[02:09.00]Nah 1:22:	| 10 bytes | width=257
[02:10.00]Heb 1:22:	| 10 bytes | width=259
[02:11.00]Heb 22:1:	| 10 bytes | width=259
[02:12.00]Mt 22:22:	| 10 bytes | width=259
[02:13.00]Neh 1:22:	| 10 bytes | width=259
[02:14.00]Neh 22:1:	| 10 bytes | width=259
[02:15.00]Lam 1:22:	| 10 bytes | width=262
[02:16.00]1Sam 1:1:	| 10 bytes | width=263
[02:17.00]2Sam 1:1:	| 10 bytes | width=263
[02:18.00]Joel 1:22:	| 11 bytes | width=263
[02:19.00]Ezra 1:22:	| 11 bytes | width=264
[02:20.00]Ezra 22:1:	| 11 bytes | width=264
[02:21.00]Mk 22:22:	| 10 bytes | width=265
[02:22.00]Acts 1:22:	| 11 bytes | width=266
[02:23.00]Acts 22:1:	| 11 bytes | width=266
[02:24.00]Amos 1:1:	| 10 bytes | width=267
[02:25.00]Esth 1:22:	| 11 bytes | width=267
[02:26.00]Esth 22:1:	| 11 bytes | width=267
[02:27.00]Jer 22:22:	| 11 bytes | width=268
[02:28.00]Phm 1:22:	| 10 bytes | width=270
[02:29.00]Pss 22:22:	| 11 bytes | width=271
[02:30.00]Pss 333:1:	| 11 bytes | width=271
[02:31.00]Prov 1:22:	| 11 bytes | width=272
[02:32.00]Prov 22:1:	| 11 bytes | width=272
[02:33.00]Rom 1:22:	| 10 bytes | width=272
[02:34.00]Rom 22:1:	| 10 bytes | width=272
[02:35.00]Josh 1:22:	| 11 bytes | width=273
[02:36.00]Josh 22:1:	| 11 bytes | width=273
[02:37.00]1Pet 1:22:	| 11 bytes | width=275
[02:38.00]1Thes 1:1:	| 11 bytes | width=275
[02:39.00]2Pet 1:22:	| 11 bytes | width=275
[02:40.00]2Thes 1:1:	| 11 bytes | width=275
[02:41.00]Lev 22:22:	| 11 bytes | width=275
[02:42.00]1Chr 1:22:	| 11 bytes | width=276
[02:43.00]1Chr 22:1:	| 11 bytes | width=276
[02:44.00]2Chr 1:22:	| 11 bytes | width=276
[02:45.00]2Chr 22:1:	| 11 bytes | width=276
[02:46.00]Eze 22:22:	| 11 bytes | width=276
[02:47.00]Num 1:22:	| 10 bytes | width=276
[02:48.00]Num 22:1:	| 10 bytes | width=276
[02:49.00]Zech 1:22:	| 11 bytes | width=276
[02:50.00]Zech 22:1:	| 11 bytes | width=276
[02:51.00]1Cor 1:22:	| 11 bytes | width=277
[02:52.00]1Cor 22:1:	| 11 bytes | width=277
[02:53.00]2Cor 1:22:	| 11 bytes | width=277
[02:54.00]2Cor 22:1:	| 11 bytes | width=277
[02:55.00]Jonah 1:1:	| 11 bytes | width=277
[02:56.00]Ruth 1:22:	| 11 bytes | width=277
[02:57.00]1Kgs 1:22:	| 11 bytes | width=279
[02:58.00]1Kgs 22:1:	| 11 bytes | width=279
[02:59.00]2Kgs 1:22:	| 11 bytes | width=279
[03:00.00]2Kgs 22:1:	| 11 bytes | width=279
[03:01.00]Jude 1:22:	| 11 bytes | width=279
[03:02.00]Judg 1:22:	| 11 bytes | width=280
[03:03.00]Judg 22:1:	| 11 bytes | width=280
[03:04.00]Deut 1:22:	| 11 bytes | width=281
[03:05.00]Deut 22:1:	| 11 bytes | width=281
[03:06.00]Job 22:22:	| 11 bytes | width=281
[03:07.00]Rev 22:22:	| 11 bytes | width=281
[03:08.00]1Tim 1:22:	| 11 bytes | width=282
[03:09.00]2Tim 1:22:	| 11 bytes | width=282
[03:10.00]Song 1:22:	| 11 bytes | width=282
[03:11.00]Zeph 1:22:	| 11 bytes | width=283
[03:12.00]Hos 22:22:	| 11 bytes | width=284
[03:13.00]Eccl 22:22:	| 12 bytes | width=286
[03:14.00]Gen 22:22:	| 11 bytes | width=287
[03:15.00]Dan 22:22:	| 11 bytes | width=288
[03:16.00]Heb 22:22:	| 11 bytes | width=290
[03:17.00]Neh 22:22:	| 11 bytes | width=290
[03:18.00]1Sam 1:22:	| 11 bytes | width=294
[03:19.00]1Sam 22:1:	| 11 bytes | width=294
[03:20.00]2Sam 1:22:	| 11 bytes | width=294
[03:21.00]2Sam 22:1:	| 11 bytes | width=294
[03:22.00]Ezra 22:22:	| 12 bytes | width=295
[03:23.00]Acts 22:22:	| 12 bytes | width=297
[03:24.00]Amos 1:22:	| 11 bytes | width=298
[03:25.00]Pss 333:22:	| 12 bytes | width=302
[03:26.00]Prov 22:22:	| 12 bytes | width=303
[03:27.00]Rom 22:22:	| 11 bytes | width=303
[03:28.00]Josh 22:22:	| 12 bytes | width=304
[03:29.00]1Thes 1:22:	| 12 bytes | width=306
[03:30.00]2Thes 1:22:	| 12 bytes | width=306
[03:31.00]1Chr 22:22:	| 12 bytes | width=307
[03:32.00]2Chr 22:22:	| 12 bytes | width=307
[03:33.00]Num 22:22:	| 11 bytes | width=307
[03:34.00]Zech 22:22:	| 12 bytes | width=307
[03:35.00]1Cor 22:22:	| 12 bytes | width=308
[03:36.00]2Cor 22:22:	| 12 bytes | width=308
[03:37.00]Jonah 1:22:	| 12 bytes | width=308
[03:38.00]1Kgs 22:22:	| 12 bytes | width=310
[03:39.00]2Kgs 22:22:	| 12 bytes | width=310
[03:40.00]Judg 22:22:	| 12 bytes | width=311
[03:41.00]Deut 22:22:	| 12 bytes | width=312
[03:42.00]1Sam 22:22:	| 12 bytes | width=325
[03:43.00]2Sam 22:22:	| 12 bytes | width=325
[03:44.00]Pss 333:333:	| 13 bytes | width=333
